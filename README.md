# 图书管理系统

本系统是一个使用C++编程语言实现的一个基于命令行交互的图书管理系统，拥有以下特性：
* 账户登录：用户仅能通过账密登录自己的账号
* 角色分离：user角色仅能查找书籍和借阅，admin角色可以对所有用户和书籍进行查询，更改
* 账号管理（仅admin）：列出/按账号名查找/新增/修改/删除 账户
* 书籍管理（仅admin）：新增/修改/删除 书籍
* 书籍查询：按书籍名称查找/按ISBN、ISSN编号查找/按作者查找/按借阅次数查找 书籍
* 图书借阅（仅user）：借阅/归还馆藏书籍

## 功能说明
使用 “-------- ” 作为系统输出与用户输入界面的分割

用户输入界面使用分级菜单的方式实现复杂需求输入，仅需用户输入数字即可对各个菜单及子菜单的选项进行选取
进入系统后所有可能的菜单树如下所示

未登录的主菜单
1. 管理员登录
    1. 账户管理
        1. 列出所有账户
        2. 查询账户
        3. 新增账户
        4. 删除账户
        5. 更新账户
        0. 返回上一级
    2. 书籍管理
        1. 列出所有书籍
        2. 新增书籍
        3. 删除书籍
        4. 更新书籍
        0. 返回上一级
    3. 书籍查找
        1. 书名查找
        2. ISBN/ISSN编号查找
        3. 作者查找
        4. 借阅排行榜
        0. 返回上一级
    0. 退出登录
2. 读者登录
    1. 书籍查找
        1. 书名查找
        2. ISBN/ISSN编号查找
        3. 作者查找
        4. 借阅排行榜
        0. 返回上一级
    2. 借阅管理
        1. 本人书籍借阅情况
        2. 书籍借阅
        3. 书籍归还
        0. 返回上一级
    0. 退出登录
0. 退出系统

## 源代码文件执行概要说明
1. 程序从最下方的main入口函数开始执行
2. 首先实例化三种数据库类的成员，如果文件不存在程序会报错退出
3. 数据库成员按行读取文件并写入数组成员中，该操作之进行一次，后续任何查询都不会再次读取文件了
4. 初始化当前用户的指针（一个角色为guest的用户，这个用户将会被覆盖）
5. 实例化图书系统类的成员对象，并开始执行无限循环的运行程序(退出系统通过exit进行强制退出)

## 各个类的作用说明
### 实体类(User, Book, UserBookMap)
用于将用户，书籍，借阅关系三个物体抽象为实体
类中的属性: 实体的共同属性，（如用户的账号名，密码，书籍的名称，出版社等）

### 数据库(database)类 (UserDb, BookDb, UserBookMapDb)
用于将文件中的数据转化为对应的数组，便于系统进行访问
类中的属性: 文件名和数组
类提供的方法: 对实体数组的增删改查

### 菜单项结构 MenuItem
负责记录各个菜单的显示名字和执行的功能的方法

### 菜单类 Menu
将菜单项组织为多级菜单，实现用户菜单的显示和跳转

类中属性：
* title 是整个菜单的名字（例如 主菜单）
* items 是菜单中各个项目对象（MenuItem数组）(例如 登录，退出)
* parent 菜单的父级菜单，用于菜单在返回上一级的跳转，主目录没有上一级，所以为空指针

类中的成员方法:
* addItem 用于动态的创建菜单，因为无法确定使用什么角色登陆，所以需要动态的去创建
* removeItem 用于动态的移除菜单，本系统只用于在用户登录后，去除登录这个菜单选项

### 系统类 BookSys
本系统的主要运行逻辑在这个类中，用于
    1. 接受用户的输入
    2. 选择正确的菜单
    3. 执行对应的功能
    4. 返回输出给用户
循环的执行这四部内容

类中属性：
menu 是系统中用于记录当前正在处于哪一级目录中
currentUser 是系统中用于记录当前登录的用户是谁
userDb bookDb userBookMapDb 将数据库实例作为成员，方便进行数据库操作

